// 测试省会城市备选逻辑
function getCityLocationId(cityName) {
  // 城市名称到LocationID的映射表
  const cityIdMap = {
    // 直辖市
    '北京': '101010100',
    '上海': '101020100',
    '天津': '101030100',
    '重庆': '101040100',
    
    // 省会城市
    '广州': '101280101',
    '成都': '101270101',
    '杭州': '101210101',
    '南京': '101190101',
    '武汉': '101200101',
    '西安': '101110101',
    '郑州': '101180101',
    '济南': '101120101',
    '沈阳': '101070101',
    '长春': '101060101',
    '哈尔滨': '101050101',
    '昆明': '101290101',
    '南宁': '101300101',
    '银川': '101170101',
    '太原': '101100101',
    '石家庄': '101090101',
    '呼和浩特': '101080101',
    '乌鲁木齐': '101130101',
    '兰州': '101160101',
    '西宁': '101150101',
    '拉萨': '101140101',
    '海口': '101310101',
    '福州': '101230101',
    '南昌': '101240101',
    '长沙': '101250101',
    '贵阳': '101260101',
    '合肥': '101220101',
    
    // 其他重要城市
    '深圳': '101280601',
    '苏州': '101190401',
    '无锡': '101190201',
    '宁波': '101210401',
    '温州': '101210701',
    '佛山': '101280800',
    '东莞': '101281601',
    '珠海': '101280701',
    '厦门': '101230201',
    '青岛': '101120201',
    '大连': '101070201',
    '烟台': '101120501',
    '桂林': '101300501',
    '三亚': '101310201',
    '洛阳': '101180901',
    '唐山': '101090501',
    '包头': '101080201',
    '台州': '101210601',
    '嘉兴': '101210301',
    '湖州': '101210201',
    '金华': '101210901',
    '衢州': '101211001',
    '丽水': '101210801',
    '舟山': '101211101',
    '泰州': '101191201',
    '扬州': '101190601',
    '盐城': '101190701',
    '淮安': '101190901',
    '连云港': '101191001',
    '宿迁': '101191301',
    '镇江': '101190301',
    '常州': '101191101',
    '徐州': '101190801',
    '南通': '101190501',
    '芜湖': '101220301',
    '蚌埠': '101220201',
    '淮南': '101220401',
    '马鞍山': '101220501',
    '淮北': '101221201',
    '铜陵': '101221301',
    '安庆': '101220601',
    '黄山': '101221001',
    '滁州': '101221101',
    '阜阳': '101220801',
    '宿州': '101220701',
    '六安': '101221501',
    '亳州': '101220901',
    '池州': '101221701',
    '宣城': '101221401',
    '莆田': '101230401',
    '三明': '101230801',
    '泉州': '101230501',
    '漳州': '101230601',
    '南平': '101230901',
    '龙岩': '101230701',
    '宁德': '101230301',
    '景德镇': '101240801',
    '萍乡': '101240901',
    '九江': '101240201',
    '新余': '101241001',
    '鹰潭': '101241101',
    '赣州': '101240701',
    '吉安': '101240601',
    '宜春': '101240501',
    '抚州': '101240401',
    '上饶': '101240301'
  };

  // 省份到省会城市的映射表（用于备选方案）
  const provinceToCapitalMap = {
    // 省份名称到省会城市的映射
    '广东': '广州',
    '广东省': '广州',
    '四川': '成都',
    '四川省': '成都',
    '浙江': '杭州',
    '浙江省': '杭州',
    '江苏': '南京',
    '江苏省': '南京',
    '湖北': '武汉',
    '湖北省': '武汉',
    '陕西': '西安',
    '陕西省': '西安',
    '河南': '郑州',
    '河南省': '郑州',
    '山东': '济南',
    '山东省': '济南',
    '辽宁': '沈阳',
    '辽宁省': '沈阳',
    '吉林': '长春',
    '吉林省': '长春',
    '黑龙江': '哈尔滨',
    '黑龙江省': '哈尔滨',
    '云南': '昆明',
    '云南省': '昆明',
    '广西': '南宁',
    '广西壮族自治区': '南宁',
    '宁夏': '银川',
    '宁夏回族自治区': '银川',
    '山西': '太原',
    '山西省': '太原',
    '河北': '石家庄',
    '河北省': '石家庄',
    '内蒙古': '呼和浩特',
    '内蒙古自治区': '呼和浩特',
    '新疆': '乌鲁木齐',
    '新疆维吾尔自治区': '乌鲁木齐',
    '甘肃': '兰州',
    '甘肃省': '兰州',
    '青海': '西宁',
    '青海省': '西宁',
    '西藏': '拉萨',
    '西藏自治区': '拉萨',
    '海南': '海口',
    '海南省': '海口',
    '福建': '福州',
    '福建省': '福州',
    '江西': '南昌',
    '江西省': '南昌',
    '湖南': '长沙',
    '湖南省': '长沙',
    '贵州': '贵阳',
    '贵州省': '贵阳',
    '安徽': '合肥',
    '安徽省': '合肥'
  };
  
  // 先尝试直接匹配
  if (cityIdMap[cityName]) {
    return cityIdMap[cityName];
  }
  
  // 如果没有直接匹配，尝试模糊匹配（去掉"市"字）
  const cityNameWithoutSuffix = cityName.replace(/市$/, '');
  if (cityIdMap[cityNameWithoutSuffix]) {
    return cityIdMap[cityNameWithoutSuffix];
  }
  
  // 如果仍然没有找到，尝试使用省会城市作为备选
  // 检查输入是否为省份名称
  if (provinceToCapitalMap[cityName]) {
    const capitalCity = provinceToCapitalMap[cityName];
    console.log(`未找到城市 "${cityName}" 的LocationID，使用省会城市 "${capitalCity}" 作为备选`);
    return cityIdMap[capitalCity];
  }
  
  // 尝试从城市名称推断省份（适用于"XX省XX市"格式）
  const provinceMatch = cityName.match(/^(.+?省)/);
  if (provinceMatch) {
    const provinceName = provinceMatch[1];
    if (provinceToCapitalMap[provinceName]) {
      const capitalCity = provinceToCapitalMap[provinceName];
      console.log(`未找到城市 "${cityName}" 的LocationID，根据省份 "${provinceName}" 使用省会城市 "${capitalCity}" 作为备选`);
      return cityIdMap[capitalCity];
    }
  }
  
  console.warn(`未找到城市 "${cityName}" 的LocationID，也无法确定对应的省会城市`);
  return null;
}

// 测试用例
console.log('=== 测试省会城市备选逻辑 ===');

// 1. 测试直接匹配（应该正常工作）
console.log('\n1. 直接匹配测试:');
console.log('北京:', getCityLocationId('北京'));
console.log('上海:', getCityLocationId('上海'));
console.log('深圳:', getCityLocationId('深圳'));

// 2. 测试模糊匹配（应该正常工作）
console.log('\n2. 模糊匹配测试:');
console.log('北京市:', getCityLocationId('北京市'));
console.log('深圳市:', getCityLocationId('深圳市'));

// 3. 测试省份名称备选（新功能）
console.log('\n3. 省份名称备选测试:');
console.log('广东:', getCityLocationId('广东'));
console.log('广东省:', getCityLocationId('广东省'));
console.log('四川:', getCityLocationId('四川'));
console.log('浙江省:', getCityLocationId('浙江省'));
console.log('江苏:', getCityLocationId('江苏'));

// 4. 测试从城市名称推断省份（新功能）
console.log('\n4. 从城市名称推断省份测试:');
console.log('广东省佛山市:', getCityLocationId('广东省佛山市'));
console.log('四川省绵阳市:', getCityLocationId('四川省绵阳市'));
console.log('浙江省台州市:', getCityLocationId('浙江省台州市'));
console.log('江苏省常熟市:', getCityLocationId('江苏省常熟市'));

// 5. 测试无法找到的情况
console.log('\n5. 无法找到测试:');
console.log('不存在的城市:', getCityLocationId('不存在的城市'));
console.log('火星市:', getCityLocationId('火星市'));

console.log('\n=== 测试完成 ===');