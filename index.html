<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- 基本的元数据设置 -->
  <meta charset="UTF-8">
  <!-- 移动设备viewport设置，确保页面在移动设备上正确显示 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>气象预警系统 - 专业天气预警与邮件提醒服务</title>
  
  
  <!-- 引入外部依赖库 (改为本地文件) -->
  <!-- Tailwind CSS框架，用于快速构建响应式UI -->
  <link href="vendor/css/tailwind.min.css" rel="stylesheet">
  <!-- Lucide图标库，提供丰富的SVG图标 -->
  <script src="vendor/js/lucide.min.js"></script>
  <!-- Chart.js图表库，用于数据可视化 -->
  <script src="vendor/js/chart.umd.min.js"></script>
  <!-- SweetAlert2弹窗库 -->
  <script src="vendor/js/sweetalert2.all.min.js"></script>
  <!-- SheetJS库，用于Excel文件处理 -->
  <script src="vendor/js/xlsx.full.min.js"></script>
  <!-- 自定义样式表 -->
  <link rel="stylesheet" href="style.css">
  
  <!-- 引入自定义JavaScript文件 -->
  <script src="email.js"></script>
  <script src="notifications.js"></script>
  
  <!-- 内联样式定义 -->
  <style>
    /* 引入Inter字体，使用替代字体先，避免外部依赖 */
    body {
      font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }


    /* 定义等宽字体类，用于显示代码或特殊文本 */
    .font-geist-mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    
    /* 浮动操作按钮样式 */
    #fab-menu {
      transition: all 0.3s ease-in-out;
    }
    
    #fab-menu button {
      transform: scale(0.9);
      opacity: 0;
      transition: all 0.2s ease-in-out;
    }
    
    #fab-menu:not(.hidden) button {
      transform: scale(1);
      opacity: 1;
    }
    
    #fab-menu button:nth-child(1) {
      transition-delay: 0.1s;
    }
    
    #fab-menu button:nth-child(2) {
      transition-delay: 0.15s;
    }
    
    #fab-menu button:nth-child(3) {
      transition-delay: 0.2s;
    }
    
    #fab-menu button:nth-child(4) {
      transition-delay: 0.25s;
    }
    
    #fab-main-btn {
      transition: transform 0.3s ease;
      cursor: move; /* 显示拖动光标 */
    }
    
    #fab-main-btn.rotate-45 {
      transform: rotate(45deg);
      cursor: pointer; /* 菜单打开时恢复默认光标 */
    }
    
    /* 拖动相关样式 */
    .dragging {
      transition: none !important; /* 拖动时禁用过渡效果 */
      opacity: 0.85; /* 拖动时稍微透明 */
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2) !important; /* 拖动时增强阴影 */
    }
    
    /* FAB容器的样式 */
    .fixed.bottom-10.right-10.z-50 {
      transition: all 0.3s ease-out;
      will-change: transform; /* 优化性能 */
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900 font-sans overflow-hidden">
  <div class="flex h-screen">
    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 bg-white border-r border-gray-200 overflow-y-auto transition-all duration-300 h-screen flex flex-col">
      <div class="p-4 border-b border-gray-200">
        <div class="flex items-center space-x-2">
          <img src="logo透明.png" width="28" height="28" alt="气象预警系统Logo" class="text-blue-500">
          <h1 class="text-xl font-semibold">气象预警系统</h1>
        </div>
      </div>
      <nav class="flex-1 p-4">
        <ul class="space-y-1">
          <li>
            <button class="tab-btn w-full flex items-center py-2 px-4 rounded-md text-gray-800 hover:bg-gray-100 transition-all duration-200 active bg-gray-100" data-tab="customers">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              人员管理
            </button>
          </li>
          <li>
            <button class="tab-btn w-full flex items-center py-2 px-4 rounded-md text-gray-800 hover:bg-gray-100 transition-all duration-200" data-tab="alerts">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3">
                <path d="M10.5 1.5H8.25A1.5 1.5 0 0 0 6.75 3v.75"></path>
                <path d="M13.5 1.5h2.25a1.5 1.5 0 0 1 1.5 1.5v.75"></path>
                <path d="M18 9.75v4.5a1.5 1.5 0 0 1-1.5 1.5h-9a1.5 1.5 0 0 1-1.5-1.5v-4.5"></path>
                <path d="M16.5 18v1.5a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5V18"></path>
                <path d="M12 10.5v4.5"></path>
                <path d="M13.5 12h-3"></path>
                <path d="M10.5 6v4.5h4.5V6a3 3 0 1 0-4.5 0Z"></path>
              </svg>
              预警
            </button>
          </li>
          <li>
            <button class="tab-btn w-full flex items-center py-2 px-4 rounded-md text-gray-800 hover:bg-gray-100 transition-all duration-200" data-tab="templates">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3">
                <rect width="16" height="20" x="4" y="2" rx="2" ry="2"></rect>
                <path d="M8 10h8"></path>
                <path d="M8 6h8"></path>
                <path d="M8 14h8"></path>
                <path d="M8 18h8"></path>
              </svg>
              模板
            </button>
          </li>
          <li>
            <button class="tab-btn w-full flex items-center py-2 px-4 rounded-md text-gray-800 hover:bg-gray-100 transition-all duration-200" data-tab="weather">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3">
                <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path>
              </svg>
              天气
            </button>
          </li>
          <li>
            <button class="tab-btn w-full flex items-center py-2 px-4 rounded-md text-gray-800 hover:bg-gray-100 transition-all duration-200" data-tab="logs">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3">
                <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" x2="8" y1="13" y2="13"></line>
                <line x1="16" x2="8" y1="17" y2="17"></line>
                <line x1="10" x2="8" y1="9" y2="9"></line>
              </svg>
              日志
            </button>
          </li>
          <li>
            <button class="tab-btn w-full flex items-center py-2 px-4 rounded-md text-gray-800 hover:bg-gray-100 transition-all duration-200" data-tab="settings">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3">
                <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              设置
            </button>
          </li>
        </ul>
      </nav>
      
      <div class="p-4 border-t border-gray-200">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white">
              <span>A</span>
            </div>
            <div>
              <p class="text-sm font-medium">管理员</p>
              <p class="text-xs text-gray-500">—</p>
            </div>
          </div>
          <button id="logout-btn" class="text-gray-500 hover:text-red-500 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-screen overflow-hidden">
      <!-- Header -->
      <header class="bg-white border-b border-gray-200 py-4 px-6 flex items-center justify-between">
        <div class="flex items-center">
          <button id="sidebar-toggle" class="mr-4 text-gray-500 hover:text-gray-700 lg:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="3" x2="21" y1="6" y2="6"></line>
              <line x1="3" x2="21" y1="12" y2="12"></line>
              <line x1="3" x2="21" y1="18" y2="18"></line>
            </svg>
          </button>
          <h2 class="text-xl font-semibold" id="current-tab-title">人员管理</h2>
        </div>
        <div class="flex items-center space-x-4">
          <div class="relative">
            <button id="notification-btn" class="text-gray-500 hover:text-gray-700 relative">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
                <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path>
              </svg>
              <span class="absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center text-white text-xs">3</span>
            </button>
            
            <!-- 修改通知面板，使用固定高度并允许内容区域滚动 -->
            <div id="notification-panel" class="hidden fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50">
              <div class="bg-white rounded-xl shadow-xl w-full max-w-2xl mx-4 flex flex-col" style="height: 80vh; max-height: 650px">
                <!-- 通知中心标题 - 固定在顶部 -->
                <div class="flex-shrink-0 p-6 border-b border-gray-200 flex justify-between items-center">
                  <h3 class="text-xl font-semibold text-gray-900">通知中心</h3>
                  <button id="close-notification-panel" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
                
                <!-- 筛选区域 - 固定在标题下方 -->
                <div class="flex-shrink-0 px-6 py-3 bg-gray-50 border-b border-gray-200">
                  <div class="flex flex-wrap gap-3">
                    <div class="flex-1 min-w-[200px]">
                      <label class="block text-xs font-medium text-gray-500 mb-1">按人员筛选</label>
                      <select id="notification-customer-filter" class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                        <option value="">全部人员</option>
                      </select>
                    </div>
                    <div class="flex-1 min-w-[200px]">
                      <label class="block text-xs font-medium text-gray-500 mb-1">按地区筛选</label>
                      <select id="notification-region-filter" class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                        <option value="">全部地区</option>
                      </select>
                    </div>
                    <div class="flex-1 min-w-[200px]">
                      <label class="block text-xs font-medium text-gray-500 mb-1">邮件类型</label>
                      <select id="notification-duplicate-filter" class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                        <option value="">全部邮件</option>
                        <option value="duplicate">重复邮件</option>
                        <option value="non-duplicate">非重复邮件</option>
                      </select>
                    </div>
                    <div class="flex-1 min-w-[200px]">
                      <label class="block text-xs font-medium text-gray-500 mb-1">用户类别</label>
                      <select id="notification-user-type-filter" class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                        <option value="">全部类别</option>
                        <option value="客户">客户</option>
                        <option value="工程师">工程师</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <!-- 通知内容区域 - 可滚动 -->
                <div class="flex-1 overflow-y-auto">
                  <div class="p-6">
                    <div class="space-y-4 divide-y divide-gray-200">
                      <!-- 通知列表将通过JavaScript动态生成 -->
                    </div>
                  </div>
                </div>
                
                <!-- 底部按钮区域 - 修改全部标记为已读为全选按钮 -->
                <div class="flex-shrink-0 p-6 bg-gray-50 rounded-b-xl border-t border-gray-200">
                  <div class="flex justify-between items-center">
                    <div class="space-x-2">
                      <button id="approve-selected-notifications" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 font-medium">
                        批量确认发送
                      </button>
                      <button id="reject-selected-notifications" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 font-medium">
                        批量取消发送
                      </button>
                    </div>
                    <button id="select-all-notifications" class="px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 font-medium">
                      全选
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button id="email-btn" class="text-gray-500 hover:text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 10V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8"></path>
              <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
              <path d="M16 19h6"></path>
              <path d="M19 16v6"></path>
            </svg>
          </button>
        </div>
      </header>

      <!-- Content Area -->
      <div class="flex-1 overflow-y-auto bg-gray-50 p-6">
        <!-- Customers Tab Content -->
        <div id="customers" class="tab-content">
          <!-- Search bar and controls -->
          <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-4">
              <div class="flex items-center w-full md:w-auto mb-4 md:mb-0">
                <div class="relative flex-1 md:w-64">
                  <input type="text" placeholder="搜索人员..." class="w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <div class="absolute left-3 top-2.5 text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="11" cy="11" r="8"></circle>
                      <path d="m21 21-4.3-4.3"></path>
                    </svg>
                  </div>
                </div>
                <button id="search-customer-btn" class="ml-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                  搜索
                </button>
                <div class="ml-2">
                  <select class="py-2 px-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" id="region-select">
                    <option value="">所有地区</option>
                  </select>
                </div>
                <div class="ml-2">
                  <select class="py-2 px-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" id="category-select">
                    <option value="">所有类别</option>
                    <option value="客户">客户</option>
                    <option value="工程师">工程师</option>
                  </select>
                </div>
                <div class="ml-2">
                  <button id="select-all-customers-btn" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                      <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                    全选
                  </button>
                </div>
              </div>
            </div>
            
            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 cursor-pointer hover:bg-blue-200 filter-tag" data-weather-type="all">
                全部人员 <span class="ml-1 bg-blue-200 rounded-full w-5 h-5 inline-flex items-center justify-center">24</span>
              </span>
              <span class="inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 cursor-pointer hover:bg-gray-200 filter-tag" data-weather-type="暴雨">
                需关注暴雨 <span class="ml-1 bg-gray-200 rounded-full w-5 h-5 inline-flex items-center justify-center">14</span>
              </span>
              <span class="inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 cursor-pointer hover:bg-gray-200 filter-tag" data-weather-type="高温">
                需关注高温 <span class="ml-1 bg-gray-200 rounded-full w-5 h-5 inline-flex items-center justify-center">8</span>
              </span>
              <span class="inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 cursor-pointer hover:bg-gray-200 filter-tag" data-weather-type="台风">
                需关注台风 <span class="ml-1 bg-gray-200 rounded-full w-5 h-5 inline-flex items-center justify-center">6</span>
              </span>
            </div>
          </div>
          
          <!-- 浮动操作按钮菜单 -->
          <div class="fixed bottom-10 right-10 z-50">
            <!-- 浮动主按钮 -->
            <button id="fab-main-btn" class="w-16 h-16 rounded-full bg-blue-600 text-white shadow-lg flex items-center justify-center hover:bg-blue-700 focus:outline-none transition-all duration-300 transform" title="点击打开操作菜单（可拖动）" aria-label="操作菜单">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
            
            <!-- 浮动子按钮 -->
            <div id="fab-menu" class="hidden flex flex-col-reverse items-center mb-4 space-y-reverse space-y-3">
              <!-- 批量删除按钮 -->
              <button id="batch-delete-customers-btn" class="w-12 h-12 rounded-full bg-red-600 text-white shadow-lg flex items-center justify-center hover:bg-red-700 focus:outline-none" title="批量删除">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 6h18"></path>
                  <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                  <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                </svg>
              </button>
              
              <!-- 添加人员按钮 -->
              <button id="add-customer-btn" class="w-12 h-12 rounded-full bg-blue-600 text-white shadow-lg flex items-center justify-center hover:bg-blue-700 focus:outline-none" title="添加人员">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                  <circle cx="9" cy="7" r="4"></circle>
                  <line x1="19" y1="8" x2="19" y2="14"></line>
                  <line x1="16" y1="11" x2="22" y2="11"></line>
                </svg>
              </button>
              
              <!-- 批量导入按钮 -->
              <button id="import-customers-btn" class="w-12 h-12 rounded-full bg-purple-600 text-white shadow-lg flex items-center justify-center hover:bg-purple-700 focus:outline-none" title="批量导入">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="17 8 12 3 7 8"></polyline>
                  <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
              </button>
              
              <!-- 批量导出按钮 -->
              <button id="export-customers-btn" class="w-12 h-12 rounded-full bg-green-600 text-white shadow-lg flex items-center justify-center hover:bg-green-700 focus:outline-none" title="批量导出">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7 10 12 15 17 10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
              </button>
            </div>
          </div>
          
          <!-- Customer list -->
          <div class="bg-white rounded-lg shadow-sm overflow-hidden">
            <div class="overflow-x-auto">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                  <tr>
                    <th scope="col" class="px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10">
                      
                    </th>
                    <th scope="col" class="pl-2 pr-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">人员信息</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">地区</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">人员类别</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">关注天气</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">最近更新</th>
                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200" id="customers-list">
                  <!-- Customer rows will be populated by JavaScript -->
                </tbody>
              </table>
            </div>
            
            <!-- Pagination -->
            <div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6">
              <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                <div>
                  <p class="text-sm text-gray-700">
                    显示 <span class="font-medium">1</span> 到 <span class="font-medium">10</span> 共 <span class="font-medium">24</span> 个人员
                  </p>
                </div>
                <div>
                  <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                    <!-- 分页按钮将由JavaScript动态生成 -->
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Alerts Tab Content -->
        <div id="alerts" class="tab-content hidden">
        
          <!-- 图表区域修改 -->
          <div class="bg-white rounded-lg shadow-sm p-6 mt-6">
            <h3 class="text-lg font-medium text-gray-900 mb-4">预警类型分布</h3>
            <div class="flex flex-col md:flex-row">
              <!-- 左侧饼图 -->
              <div class="w-full md:w-1/2">
                <canvas id="alertTypeChart"></canvas>
              </div>
              
              <!-- 右侧预警类型详情列表 -->
              <div class="w-full md:w-1/2 mt-6 md:mt-0 md:pl-6">
                <h4 class="text-md font-medium text-gray-700 mb-3">预警类型详情</h4>
                <div class="space-y-3 max-h-80 overflow-y-auto pr-2" id="alert-type-details">
                  <!-- 动态生成的预警类型卡片将插入到这里 -->
                </div>
              </div>
            </div>
          </div>

          <!-- Alert Rules -->
          <div class="mt-6 bg-white rounded-lg shadow-sm">
            <div class="flex items-center justify-between p-6 border-b border-gray-200">
              <h3 class="text-lg font-medium text-gray-900">预警条件设置</h3>
              <button id="add-alert-rule-btn" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                  <path d="M5 12h14"></path>
                  <path d="M12 5v14"></path>
                </svg>
                添加预警条件
              </button>
            </div>
            
            <div class="overflow-x-auto">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                  <tr>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">预警类型</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">触发条件</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                    <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200" id="alert-rules-list">
                  <!-- Alert rules will be populated by JavaScript -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Templates Tab Content -->
        <div id="templates" class="tab-content hidden">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Template List -->
            <div class="col-span-1 bg-white rounded-lg shadow-sm overflow-hidden">
              <div class="p-4 border-b border-gray-200 flex items-center justify-between">
                <h3 class="text-lg font-medium text-gray-900">模板列表</h3>
                <button class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                    <path d="M5 12h14"></path>
                    <path d="M12 5v14"></path>
                  </svg>
                  新建
                </button>
              </div>
              <!-- 添加筛选器 -->
              <div class="p-3 border-b border-gray-200">
                <div class="flex space-x-2">
                  <div class="w-full">
                    <label for="template-target-filter" class="block text-xs font-medium text-gray-700 mb-1">适用对象</label>
                    <select id="template-target-filter" class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md">
                      <option value="">全部模板</option>
                      <option value="customer">客户模板</option>
                      <option value="engineer">工程师模板</option>
                      <option value="all">通用模板</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="overflow-y-auto" style="max-height: 500px;">
                <ul class="divide-y divide-gray-200" id="template-list">
                  <!-- Templates will be populated by JavaScript -->
                </ul>
              </div>
            </div>
            
            <!-- Template Editor -->
            <div class="col-span-2 bg-white rounded-lg shadow-sm overflow-hidden hidden" id="template-editor">
              <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-900">模板编辑</h3>
                <div class="flex space-x-2">
                  <button id="save-template-btn" class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                      <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                      <polyline points="17 21 17 13 7 13 7 21"></polyline>
                      <polyline points="7 3 7 8 15 8"></polyline>
                    </svg>
                    保存
                  </button>
                  <button id="cancel-template-btn" class="inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    取消
                  </button>
                </div>
              </div>
              
              <div class="p-4">
                <div class="mb-4">
                  <label for="template-name" class="block text-sm font-medium text-gray-700">模板名称</label>
                  <input type="text" id="template-name" value="" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
                
                <div class="grid grid-cols-2 gap-4 mb-4">
                  <div>
                    <label for="template-subject" class="block text-sm font-medium text-gray-700">邮件主题</label>
                    <input type="text" id="template-subject" value="" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                  </div>
                  
                  <div class="grid grid-cols-2 gap-4">
                    <div>
                      <label for="template-type" class="block text-sm font-medium text-gray-700">预警类型</label>
                      <select id="template-type" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                        <option value="">-- 请选择预警类型 --</option>
                      </select>
                    </div>
                    
                    <div>
                      <label class="block text-sm font-medium text-gray-700 mb-2">状态</label>
                      <label class="inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="template-status" class="sr-only" checked>
                        <div class="relative flex items-center">
                          <div class="block bg-gray-200 w-10 h-6 rounded-full transition"></div>
                          <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition transform translate-x-0 checked:translate-x-4"></div>
                        </div>
                        <span class="ml-2 text-sm text-gray-700">活跃</span>
                      </label>
                      <style>
                        input:checked ~ .relative .dot {
                          transform: translateX(100%);
                        }
                        input:checked ~ .relative .block {
                          background-color: #3B82F6;
                        }
                      </style>
                    </div>
                  </div>
                </div>
                
                <div class="mb-4">
                  <label for="template-target-role" class="block text-sm font-medium text-gray-700">适用对象</label>
                  <select id="template-target-role" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    <option value="all">通用</option>
                    <option value="customer">客户专用</option>
                    <option value="engineer">工程师专用</option>
                  </select>
                </div>
                
                <div class="mb-4">
                  <label for="template-content" class="block text-sm font-medium text-gray-700">内容</label>
                  <div class="mt-1">
                    <div class="flex space-x-2 mb-2">
                      <div class="relative">
                        <button class="px-2 py-1 border border-gray-300 rounded-md text-gray-700 text-sm hover:bg-gray-50 variable-btn">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 8v4"></path>
                            <path d="M12 16h.01"></path>
                          </svg>
                          <span class="ml-1">变量</span>
                        </button>
                        <div class="absolute z-10 mt-1 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none hidden variable-menu">
                          <div class="py-1">
                            <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-variable="{{name}}">姓名</button>
                            <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-variable="{{title}}">称呼</button>
                            <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-variable="{{company}}">公司</button>
                            <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-variable="{{region}}">地区</button>
                            <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-variable="{{date}}">日期</button>
                          </div>
                        </div>
                      </div>
                      <script>
                        // 变量菜单的显示与隐藏
                        document.addEventListener('DOMContentLoaded', function() {
                          const variableBtn = document.querySelector('.variable-btn');
                          const variableMenu = document.querySelector('.variable-menu');
                          
                          if (variableBtn && variableMenu) {
                            variableBtn.addEventListener('click', function() {
                              variableMenu.classList.toggle('hidden');
                            });
                            
                            // 点击其他地方关闭菜单
                            document.addEventListener('click', function(e) {
                              if (!e.target.closest('.variable-btn') && !e.target.closest('.variable-menu')) {
                                variableMenu.classList.add('hidden');
                              }
                            });
                            
                            // 点击变量插入到文本框
                            const variableItems = variableMenu.querySelectorAll('button');
                            const contentTextarea = document.getElementById('template-content');
                            
                            variableItems.forEach(item => {
                              item.addEventListener('click', function() {
                                const variable = this.getAttribute('data-variable');
                                const textarea = contentTextarea;
                                const start = textarea.selectionStart;
                                const end = textarea.selectionEnd;
                                const text = textarea.value;
                                
                                textarea.value = text.substring(0, start) + variable + text.substring(end);
                                
                                // 重新设置光标位置
                                textarea.selectionStart = textarea.selectionEnd = start + variable.length;
                                
                                // 关闭菜单
                                variableMenu.classList.add('hidden');
                                
                                // 聚焦回文本框
                                textarea.focus();
                              });
                            });
                          }
                        });
                      </script>
                    </div>
                    <textarea id="template-content" rows="12" class="shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md"></textarea>
                  </div>
                </div>
                
                <!-- 附件上传组件 -->
                <div class="mb-4">
                  <label class="block text-sm font-medium text-gray-700 mb-2">邮件附件</label>
                  <div class="flex flex-col space-y-2">
                    <div class="flex items-center justify-between">
                      <div class="flex-1">
                        <div class="flex items-center">
                          <span class="sr-only">选择文件</span>
                          <input id="template-attachment" type="file" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" multiple />
                        </div>
                      </div>
                      <button id="upload-attachment-btn" class="inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                          <polyline points="17 8 12 3 7 8"></polyline>
                          <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        上传
                      </button>
                    </div>
                    <p class="text-xs text-gray-500">支持的文件类型：PDF, Word, Excel, 图片等，单个文件不超过5MB</p>
                    
                    <!-- 已上传的附件列表 -->
                    <div id="attachments-list" class="mt-2">
                      <div class="text-sm text-gray-500">暂无附件</div>
                    </div>
                  </div>
                </div>
                
                <div class="bg-gray-50 p-3 mt-4 rounded-md">
                  <h4 class="text-sm font-medium text-gray-700 mb-2">变量说明</h4>
                  <div class="grid grid-cols-3 gap-2 text-xs text-gray-500">
                    <div><code>{{姓名}}</code> - 客户姓名</div>
                    <div><code>{{称呼}}</code> - 称呼</div>
                    <div><code>{{地区}}</code> - 预警地区</div>
                    <div><code>{{公司}}</code> - 客户公司</div>
                    <div><code>{{日期}}</code> - 预警开始时间</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Weather Tab Content -->
        <div id="weather" class="tab-content hidden">
          <!-- 天气界面内容将被重建 -->
        </div>

        <!-- Logs Tab Content -->
        <div id="logs" class="tab-content hidden">
          <!-- Search and Filter -->
          <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
            <div class="flex flex-col md:flex-row md:items-center justify-between mb-4">
              <div class="flex items-center w-full md:w-auto mb-4 md:mb-0">
                <div class="relative flex-1 md:w-64">
                  <input type="text" placeholder="搜索日志..." class="w-full pl-10 pr-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                  <div class="absolute left-3 top-2.5 text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="11" cy="11" r="8"></circle>
                      <path d="m21 21-4.3-4.3"></path>
                    </svg>
                  </div>
                </div>
                <button class="ml-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                  搜索
                </button>
                <div class="ml-2">
                  <select class="py-2 px-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">所有类型</option>
                    <option value="暴雨">暴雨预警</option>
                    <option value="高温">高温预警</option>
                    <option value="台风">台风预警</option>
                  </select>
                </div>
                <div class="ml-2">
                  <select class="py-2 px-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" id="log-date-filter">
                    <option value="">所有时间</option>
                    <option value="today">今天</option>
                    <option value="yesterday">昨天</option>
                    <option value="week">本周</option>
                    <option value="month">本月</option>
                    <option value="year">今年</option>
                  </select>
                </div>
                <div class="ml-2">
                  <select id="log-user-type-filter" class="py-2 px-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">所有用户</option>
                    <option value="客户">客户</option>
                    <option value="工程师">工程师</option>
                  </select>
                </div>
                <button id="test-alert-btn" class="ml-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2">
                  预警检测
                </button>
              </div>
            </div>
            
            <div class="flex flex-wrap gap-2">
              <span class="inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800">
                所有日志 <span id="total-logs" class="ml-1 bg-blue-200 rounded-full w-5 h-5 inline-flex items-center justify-center">0</span>
              </span>
              <span class="inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800">
                发送成功 <span id="success-logs" class="ml-1 bg-green-200 rounded-full w-5 h-5 inline-flex items-center justify-center">0</span>
              </span>
              <span class="inline-flex items-center px-3 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800">
                发送失败 <span id="failed-logs" class="ml-1 bg-red-200 rounded-full w-5 h-5 inline-flex items-center justify-center">0</span>
              </span>
              <div class="ml-auto flex gap-2">
                <button id="select-all-logs" class="px-3 py-1 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                  全选
                </button>
                <button id="batch-resend-logs" class="px-3 py-1 text-sm font-medium rounded-md bg-green-600 text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2">
                  批量重发
                </button>
                <button id="batch-delete-logs" class="px-3 py-1 text-sm font-medium rounded-md bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                  批量删除
                </button>
              </div>
            </div>
          </div>
          
          <!-- Logs Table -->
          <div class="bg-white rounded-lg shadow-sm overflow-hidden">
            <div class="overflow-x-auto">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                  <tr>
                    <th scope="col" class="px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10">
                      
                    </th>
                    <th scope="col" class="pl-2 pr-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">邮件发送时间</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">人员信息</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">地点</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">天气类型</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">主题</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                  </tr>
                </thead>
                <tbody id="logs-table-body" class="bg-white divide-y divide-gray-200">
                  <!-- 日志数据将动态插入到这里 -->
                </tbody>
              </table>
            </div>
            
            <!-- 移除了预设统计信息 -->
          </div>
        </div>

        <!-- Settings Tab Content -->
        <div id="settings" class="tab-content hidden">
          <div class="bg-white rounded-lg shadow-sm overflow-hidden">
            <div class="p-6 border-b border-gray-200">
              <h3 class="text-lg font-medium text-gray-900">系统设置</h3>
              <p class="mt-1 text-sm text-gray-500">配置邮件发送和预警参数</p>
            </div>
            
            <!-- Email Settings -->
            <div class="p-6 border-b border-gray-200">
              <h4 class="text-base font-medium text-gray-900 mb-4">邮件设置</h4>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label for="email-sender" class="block text-sm font-medium text-gray-700">发件人邮箱</label>
                  <input type="email" id="email-sender" value="" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
                
                <div>
                  <label for="email-name" class="block text-sm font-medium text-gray-700">发件人名称</label>
                  <input type="text" id="email-name" value="气象预警系统" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
                
                <div>
                  <label for="smtp-server" class="block text-sm font-medium text-gray-700">SMTP服务器</label>
                  <input type="text" id="smtp-server" value="smtp.example.com" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
                
                <div>
                  <label for="smtp-port" class="block text-sm font-medium text-gray-700">SMTP端口</label>
                  <input type="number" id="smtp-port" value="587" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
                
                <div>
                  <label for="smtp-username" class="block text-sm font-medium text-gray-700">SMTP用户名</label>
                  <input type="text" id="smtp-username" value="" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
                
                <div>
                  <label for="smtp-password" class="block text-sm font-medium text-gray-700">SMTP密码</label>
                  <input type="password" id="smtp-password" value="********" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
              </div>
              
              <div class="mt-4 flex items-center">
                <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mr-3">
                  测试连接
                </button>
                <span class="text-sm text-gray-500">上次测试：成功 (2023-06-10 14:30)</span>
              </div>
            </div>
            
            <!-- Alert Settings -->
            <div class="p-6 border-b border-gray-200">
              <h4 class="text-base font-medium text-gray-900 mb-4">预警设置</h4>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label for="alert-advance-time" class="block text-sm font-medium text-gray-700">提前预警时间</label>
                  <select id="alert-advance-time" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                    <option value="1">1天</option>
                    <option value="2">2天</option>
                    <option value="3">3天</option>
                    <option value="4">4天</option>
                    <option value="5">5天</option>
                    <option value="6">6天</option>
                  </select>
                </div>
                
                <div>
                  <label for="warning-interval" class="block text-sm font-medium text-gray-700">预警间隔（小时）</label>
                  <input type="number" id="warning-interval" value="12" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
                
                <div>
                  <label for="weather-api-key" class="block text-sm font-medium text-gray-700">天气API密钥</label>
                  <input type="text" id="weather-api-key" value="" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
                
                <div>
                  <label for="first-alert" class="block text-sm font-medium text-gray-700">初次预警时间（时:分）</label>
                  <input type="time" id="first-alert" value="06:00" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md">
                </div>
              </div>
              
              <div class="mt-4">
                <div class="flex items-start">
                  <div class="flex items-center h-5">
                    <input id="auto-retry" type="checkbox" checked class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                  </div>
                  <div class="ml-3 text-sm">
                    <label for="auto-retry" class="font-medium text-gray-700">启用区间预测</label>
                    <!-- 删除描述文本 -->
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Notification Settings -->
            <div class="p-6">
              <h4 class="text-base font-medium text-gray-900 mb-4">通知设置</h4>
              
              <div class="mt-4">
                <div class="flex items-start">
                  <div class="flex items-center h-5">
                    <input id="admin-notifications" type="checkbox" checked class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                  </div>
                  <div class="ml-3 text-sm">
                    <label for="admin-notifications" class="font-medium text-gray-700">管理员通知</label>
                    <p class="text-gray-500">当有重要预警触发时通知管理员</p>
                  </div>
                </div>
              </div>
              
              <div class="mt-4">
                <div class="flex items-start">
                  <div class="flex items-center h-5">
                    <input id="auto-approval" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                  </div>
                  <div class="ml-3 text-sm">
                    <label for="auto-approval" class="font-medium text-gray-700">自动审批并发送邮件</label>
                    <p class="text-gray-500">启用后预警邮件将自动发送，无需在通知中心手动审批</p>
                  </div>
                </div>
              </div>

              <div class="mt-6">
                <button id="clear-queues" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                  清空所有待发送队列
                </button>
                <p class="mt-2 text-xs text-gray-500">同时清空自动/手动发送队列与通知中心待审批项（包含本地兜底文件）。</p>
              </div>
              
              <!-- 移除了每日发送摘要选项 -->
              
              <div class="mt-6 flex justify-end">
                <button class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mr-3">
                  取消
                </button>
                <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                  保存设置
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Footer -->
      <footer class="mt-auto bg-white border-t border-gray-200 py-4 px-6 text-center">
        <p class="text-sm text-gray-500">
          &copy; 气象预警系统
        </p>
      </footer>
    </main>
  </div>

  <script src="weatherColors.js"></script>
  <script src="weatherIcons.js"></script>
  <script src="sidebarToggle.js"></script>
  <script src="tabsHandler.js"></script>
  <script src="customers.js"></script>
  <script src="alerts.js"></script>
  <script src="templates.js"></script>
  <script src="weather.js"></script>
  <script src="logs.js"></script>
  <script src="settings.js"></script>
  <script src="script.js"></script>
  
  <script>
    window.addEventListener("wheel", (e)=> {
      const isPinching = e.ctrlKey
      if(isPinching) e.preventDefault()
    }, { passive: false })
  </script>

  <!-- 添加客户模态框 -->
  <div id="add-customer-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-medium">添加新人员</h3>
        <button id="close-customer-modal" class="text-gray-400 hover:text-gray-600">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <form id="add-customer-form">
        <div class="grid grid-cols-2 gap-4 mb-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">姓名 *</label>
            <input type="text" name="name" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">称呼</label>
            <input type="text" name="title" class="w-full px-3 py-2 border border-gray-300 rounded-md">
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">公司</label>
          <input type="text" name="company" class="w-full px-3 py-2 border border-gray-300 rounded-md">
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">地区 *</label>
          <div class="flex space-x-2">
            <select name="region" required class="w-full px-3 py-2 border border-gray-300 rounded-md" id="add-region-select">
              <option value="">请选择地区</option>
            </select>
            <button type="button" id="add-new-region-btn" class="px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700">
              新增
            </button>
          </div>
          <div id="new-region-input" class="mt-2 hidden">
            <input type="text" id="new-region" placeholder="输入新地区" class="w-full px-3 py-2 border border-gray-300 rounded-md">
            <div class="flex justify-end mt-1 space-x-2">
              <button type="button" id="cancel-new-region-btn" class="px-2 py-1 text-xs border border-gray-300 rounded-md shadow-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                取消
              </button>
              <button type="button" id="save-new-region-btn" class="px-2 py-1 text-xs border border-transparent rounded-md shadow-sm font-medium text-white bg-green-600 hover:bg-green-700">
                确认添加
              </button>
            </div>
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">邮箱 *</label>
          <input type="email" name="email" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
        </div>
        
        <div class="grid grid-cols-2 gap-4 mb-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">电话</label>
            <input type="tel" name="phone" class="w-full px-3 py-2 border border-gray-300 rounded-md">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">人员类别 *</label>
            <div class="flex items-center space-x-4 mt-2">
              <label class="inline-flex items-center">
                <input type="radio" name="category" value="客户" class="form-radio h-4 w-4 text-blue-600" checked>
                <span class="ml-2 text-sm">客户</span>
              </label>
              <label class="inline-flex items-center">
                <input type="radio" name="category" value="工程师" class="form-radio h-4 w-4 text-blue-600">
                <span class="ml-2 text-sm">工程师</span>
              </label>
            </div>
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">关注的天气类型 *</label>
          <div class="flex flex-wrap gap-1 mt-1" id="weather-type-options">
            <!-- 天气类型选项将通过JavaScript动态添加 -->
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" id="cancel-add-customer" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
            取消
          </button>
          <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700">
            保存
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- 编辑客户模态框 -->
  <div id="edit-customer-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-medium">编辑人员</h3>
        <button id="close-edit-modal" class="text-gray-400 hover:text-gray-600">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <form id="edit-customer-form">
        <input type="hidden" name="customerId" id="edit-customer-id">
        <div class="grid grid-cols-2 gap-4 mb-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">姓名 *</label>
            <input type="text" name="name" id="edit-name" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">称呼</label>
            <input type="text" name="title" id="edit-title" class="w-full px-3 py-2 border border-gray-300 rounded-md">
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">公司</label>
          <input type="text" name="company" id="edit-company" class="w-full px-3 py-2 border border-gray-300 rounded-md">
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">地区 *</label>
          <select name="region" id="edit-region" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
            <option value="">请选择地区</option>
          </select>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">邮箱 *</label>
          <input type="email" name="email" id="edit-email" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
        </div>
        
        <div class="grid grid-cols-2 gap-4 mb-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">电话</label>
            <input type="tel" name="phone" id="edit-phone" class="w-full px-3 py-2 border border-gray-300 rounded-md">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">人员类别 *</label>
            <div class="flex items-center space-x-4 mt-2">
              <label class="inline-flex items-center">
                <input type="radio" name="category" value="客户" id="edit-category-customer" class="form-radio h-4 w-4 text-blue-600">
                <span class="ml-2 text-sm">客户</span>
              </label>
              <label class="inline-flex items-center">
                <input type="radio" name="category" value="工程师" id="edit-category-engineer" class="form-radio h-4 w-4 text-blue-600">
                <span class="ml-2 text-sm">工程师</span>
              </label>
            </div>
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">关注的天气类型 *</label>
          <div class="flex flex-wrap gap-1 mt-1" id="edit-weather-type-options">
            <!-- 天气类型选项将通过JavaScript动态添加 -->
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" id="cancel-edit-customer" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
            取消
          </button>
          <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700">
            保存
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- 添加预警条件模态框 -->
  <div id="add-alert-rule-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-medium">添加预警条件</h3>
        <button id="close-alert-rule-modal" class="text-gray-400 hover:text-gray-600">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <form id="add-alert-rule-form">
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">预警类型 *</label>
          <select name="type" id="alert-type-select" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
            <option value="">请选择预警类型</option>
            <optgroup label="参数型预警">
              <option value="高温">高温</option>
              <option value="低温">低温</option>
              <option value="极端低温">极端低温</option>
              <option value="大风">大风</option>
              <option value="大雾">大雾</option>
              <option value="暴雨">暴雨</option>
            </optgroup>
            <optgroup label="文本型预警">
              <option value="暴雪">暴雪</option>
              <option value="冻雨">冻雨</option>
              <option value="台风">台风</option>
              <option value="沙尘暴">沙尘暴</option>
              <option value="冰雹">冰雹</option>
              <option value="雷电">雷电</option>
              <option value="其他">其他</option>
            </optgroup>
          </select>
        </div>
        
        <!-- 参数型预警条件输入区域 -->
        <div id="parameter-condition-container" class="mb-4 hidden">
          <label class="block text-sm font-medium text-gray-700 mb-1">触发条件 *</label>
          
          <!-- 高温参数输入 -->
          <div id="high-temp-params" class="condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">最高温度 >=</span>
              <input type="number" name="high_temp_value" min="0" max="100" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">度</span>
            </div>
          </div>
          
          <!-- 低温参数输入 -->
          <div id="low-temp-params" class="condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">最低温度 <=</span>
              <input type="number" name="low_temp_value" min="-100" max="50" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">度</span>
            </div>
          </div>
          
          <!-- 极端低温参数输入 -->
          <div id="extreme-low-temp-params" class="condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">最低温度 <=</span>
              <input type="number" name="extreme_low_temp_value" min="-100" max="10" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">度</span>
            </div>
          </div>
          
          <!-- 大风参数输入 -->
          <div id="wind-params" class="condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">风速 >=</span>
              <input type="number" name="wind_speed_value" min="0" max="200" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">km/h</span>
            </div>
          </div>
          
          <!-- 大雾参数输入 -->
          <div id="fog-params" class="condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">能见度 <=</span>
              <input type="number" name="visibility_value" min="0" max="10000" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">km</span>
            </div>
          </div>
          
          <!-- 暴雨参数输入 -->
          <div id="rain-params" class="condition-params hidden">
            <div class="mt-2 flex flex-wrap items-center">
              <span class="text-sm mr-2">24h降雨量 >=</span>
              <input type="number" name="rainfall_value" id="rainfall-value-input" placeholder="毫米" min="0" step="0.1" class="w-20 mr-2 px-2 py-1 border rounded-md">
              <span class="text-sm">mm</span>
              <input type="hidden" name="rainfall_period" value="24小时">
            </div>
          </div>
          
          <input type="hidden" name="parameter_condition" id="parameter-condition-value">
        </div>
        
        <!-- 文本型预警条件输入区域 -->
        <div id="text-condition-container" class="mb-4 hidden">
          <label class="block text-sm font-medium text-gray-700 mb-1">触发条件 *</label>
          <input type="text" name="text_condition" id="text-condition-input" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="输入需要识别的文本关键词，例如：台风登陆">
          <p class="mt-1 text-xs text-gray-500">系统将在天气预报文本中搜索这些关键词来触发预警</p>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" id="cancel-add-alert-rule" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
            取消
          </button>
          <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700">
            保存
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- 编辑预警条件模态框 -->
  <div id="edit-alert-rule-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-medium">编辑预警条件</h3>
        <button id="close-edit-alert-rule-modal" class="text-gray-400 hover:text-gray-600">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <form id="edit-alert-rule-form">
        <input type="hidden" name="ruleId" id="edit-rule-id">
        <input type="hidden" name="alertType" id="edit-alert-type" value="parameter">
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">预警类型 *</label>
          <select name="type" id="edit-rule-type" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
            <option value="">请选择预警类型</option>
            <optgroup label="参数型预警">
              <option value="高温">高温</option>
              <option value="低温">低温</option>
              <option value="极端低温">极端低温</option>
              <option value="大风">大风</option>
              <option value="大雾">大雾</option>
              <option value="暴雨">暴雨</option>
            </optgroup>
            <optgroup label="文本型预警">
              <option value="暴雪">暴雪</option>
              <option value="冻雨">冻雨</option>
              <option value="台风">台风</option>
              <option value="沙尘暴">沙尘暴</option>
              <option value="冰雹">冰雹</option>
              <option value="雷电">雷电</option>
              <option value="其他">其他</option>
            </optgroup>
          </select>
        </div>
        
        <!-- 参数型预警条件输入区域 -->
        <div id="edit-parameter-condition-container" class="mb-4 hidden">
          <label class="block text-sm font-medium text-gray-700 mb-1">触发条件 *</label>
          
          <!-- 高温参数输入 -->
          <div id="edit-high-temp-params" class="edit-condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">最高温度 >=</span>
              <input type="number" name="edit_high_temp_value" id="edit-high-temp-value" min="0" max="100" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">度</span>
            </div>
          </div>
          
          <!-- 低温参数输入 -->
          <div id="edit-low-temp-params" class="edit-condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">最低温度 <=</span>
              <input type="number" name="edit_low_temp_value" id="edit-low-temp-value" min="-100" max="50" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">度</span>
            </div>
          </div>
          
          <!-- 极端低温参数输入 -->
          <div id="edit-extreme-low-temp-params" class="edit-condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">最低温度 <=</span>
              <input type="number" name="edit_extreme_low_temp_value" id="edit-extreme-low-temp-value" min="-100" max="10" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">度</span>
            </div>
          </div>
          
          <!-- 大风参数输入 -->
          <div id="edit-wind-params" class="edit-condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">风速 >=</span>
              <input type="number" name="edit_wind_speed_value" id="edit-wind-speed-value" min="0" max="200" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">km/h</span>
            </div>
          </div>
          
          <!-- 大雾参数输入 -->
          <div id="edit-fog-params" class="edit-condition-params hidden">
            <div class="flex items-center space-x-2 mb-2">
              <span class="text-sm">能见度 <=</span>
              <input type="number" name="edit_visibility_value" id="edit-visibility-value" min="0" max="10000" class="w-20 px-2 py-1 border border-gray-300 rounded-md">
              <span class="text-sm">km</span>
            </div>
          </div>
          
          <!-- 暴雨参数输入 -->
          <div id="edit-rain-params" class="edit-condition-params hidden">
            <div class="mt-2 flex flex-wrap items-center">
              <span class="text-sm mr-2">24h降雨量 >=</span>
              <input type="number" name="edit_rainfall_value" id="edit-rainfall-value" placeholder="毫米" min="0" step="0.1" class="w-20 mr-2 px-2 py-1 border rounded-md">
              <span class="text-sm">mm</span>
              <input type="hidden" name="edit_rainfall_period" id="edit-rainfall-period" value="24小时">
            </div>
          </div>
        </div>
        
        <!-- 文本型预警条件输入区域 -->
        <div id="edit-text-condition-container" class="mb-4 hidden">
          <label class="block text-sm font-medium text-gray-700 mb-1">触发条件 *</label>
          <input type="text" name="edit_text_condition" id="edit-text-condition-input" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="输入需要识别的文本关键词，例如：台风登陆">
          <p class="mt-1 text-xs text-gray-500">系统将在天气预报文本中搜索这些关键词来触发预警</p>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" id="cancel-edit-alert-rule" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
            取消
          </button>
          <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700">
            保存
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- 添加批量导入模态框 -->
  <div id="import-customers-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-medium">批量导入人员</h3>
        <button id="close-import-modal" class="text-gray-400 hover:text-gray-600">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <form id="import-customers-form">
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">选择Excel文件</label>
          <div class="flex items-center justify-center border-2 border-dashed border-gray-300 rounded-md px-6 py-4">
            <div class="space-y-1 text-center">
              <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              <div class="flex text-sm text-gray-600">
                <label for="excel-file" class="relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500">
                  <span>选择文件</span>
                  <input id="excel-file" name="excel-file" type="file" accept=".xlsx,.xls" class="sr-only">
                </label>
                <p class="pl-1">或拖放文件</p>
              </div>
              <p class="text-xs text-gray-500">支持Excel格式(.xlsx, .xls)</p>
            </div>
          </div>
          <div id="file-name-display" class="mt-2 text-sm text-gray-600 hidden">
            已选择: <span id="selected-file-name" class="font-medium"></span>
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">数据模板</label>
          <div class="bg-blue-50 p-3 rounded-md">
            <p class="text-sm text-blue-800">Excel文件需要包含以下列:</p>
            <ul class="list-disc list-inside text-xs text-blue-700 mt-1">
              <li>姓名 (必填)</li>
              <li>称呼</li>
              <li>公司</li>
              <li>地区 (必填)</li>
              <li>邮箱 (必填)</li>
              <li>电话</li>
              <li>人员类别 (客户/工程师，默认为客户)</li>
              <li>关注的天气类型 (多个类型用逗号分隔，必填)</li>
            </ul>
            <a href="#" id="download-template" class="inline-flex items-center text-xs font-medium text-blue-600 hover:text-blue-500 mt-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              下载模板
            </a>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" id="cancel-import" class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
            取消
          </button>
          <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
            开始导入
          </button>
        </div>
      </form>
    </div>
  </div>
</body>
</html>
